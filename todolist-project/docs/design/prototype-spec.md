# 产品原型规格 (Prototype Specification)

> **项目**: TodoList 待办事项管理系统
> **版本**: 1.0
> **最后更新**: 2026-01-26

---

## 原型概述

本文档详细描述 TodoList 应用的交互原型，包括页面跳转逻辑、交互状态、动画效果和错误处理流程。

---

## 页面规格

### 页面 1: 登录/注册页面 (Login/Register)

**URL**: `/login`, `/register`

#### 布局结构

```
┌─────────────────────────────────────┐
│                                     │
│          [Logo: 📋]                 │
│          TodoList                   │
│       待办事项管理系统               │
│                                     │
│      [登录]  [注册]  (标签切换)     │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 用户名: [______________]     │   │
│  │                             │   │
│  │ 密码:   [______________] 👁️ │   │
│  │                             │   │
│  │ [☐] 记住我    忘记密码?      │   │
│  │                             │   │
│  │    [    登录按钮    ]       │   │
│  └─────────────────────────────┘   │
│                                     │
│      还没有账号? [注册]             │
│                                     │
└─────────────────────────────────────┘
```

#### 交互元素

| 元素 | 类型 | 状态 | 说明 |
|------|------|------|------|
| 用户名输入框 | Input | 启用 | 支持字母、数字、下划线，4-20字符 |
| 密码输入框 | Input | 启用 | 支持密码显示/隐藏切换 |
| 记住我复选框 | Checkbox | 启用 | 记住登录状态7天 |
| 登录按钮 | Button | 启用 | 点击提交登录表单 |
| 注册链接 | Link | 启用 | 切换到注册表单 |
| 忘记密码链接 | Link | 禁用 | 功能未实现（暂不支持） |

#### 状态定义

**初始状态**:
- 登录按钮: 可点击，显示"登录"
- 输入框: 可编辑
- 错误提示: 隐藏

**输入中状态**:
- 输入框获得焦点: 蓝色边框 (#1890FF)
- 显示字符计数（注册时）

**验证中状态**:
- 输入框失去焦点: 实时验证
- 错误字段: 红色边框 + 错误提示显示
- 成功字段: 无变化

**提交中状态**:
- 登录按钮: 禁用，显示"登录中..."
- 按钮图标: 显示旋转加载动画
- 输入框: 禁用

**成功状态**:
- 登录按钮: 显示"成功 ✓"
- 停留 0.5 秒后自动跳转

**错误状态**:
- 登录按钮: 恢复可点击
- 顶部显示错误提示横幅
- 错误字段: 红色边框

#### 验证规则

**登录验证**:
- 用户名: 必填，4-20字符
- 密码: 必填，至少8字符

**注册验证**:
- 用户名:
  - 必填，4-20字符
  - 只能包含字母、数字、下划线
  - 用户名唯一性检查（失去焦点时）
- 密码:
  - 必填，至少8字符
  - 必须包含字母和数字
  - 实时强度提示
- 确认密码:
  - 必须与密码一致

#### 页面跳转

- 登录成功 → `/dashboard`
- 注册成功 → `/dashboard`
- 点击"返回首页" → `/`

---

### 页面 2: 待办列表页面 (Dashboard)

**URL**: `/dashboard`

#### 布局结构

```
┌─────────────────────────────────────────────────────────┐
│ [📋 TodoList]  待办事项  分类管理  个人中心  [用户▼]    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐  │
│  │   全部   │ │  待处理  │ │  已完成  │ │  已过期  │  │
│  │    12    │ │    5     │ │    7     │ │    3     │  │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘  │
│                                                         │
│  [➕新建] [🗑️删除] [📥导出]  [🔍搜索________]  [🔄筛选]  │
│                                                         │
│  ☐ 完成项目文档编写  🔴高 📅工作 2026-01-30  [✓][✏️][🗑️] │
│  ☑ 团队周会          🟠中 📅会议 2026-01-27  [↩️][✏️][🗑️] │
│  ☐ 学习Spring Boot   ⚪低 📚学习 2026-02-15  [✓][✏️][🗑️] │
│  ☐ 准备季度报告      🔴高 📅工作 2026-01-25  [✓][✏️][🗑️] │
│                                                         │
│  [◀] [1] [2] [3] [▶]                                    │
└─────────────────────────────────────────────────────────┘
```

#### 交互元素

| 元素 | 类型 | 交互说明 |
|------|------|----------|
| 统计卡片 | Card | 悬停显示详细信息，点击过滤对应状态 |
| 新建按钮 | Button | 打开创建待办页面 |
| 批量删除 | Button | 选中多个待办后启用，打开确认对话框 |
| 导出按钮 | Button | 下拉菜单选择导出格式（JSON/CSV） |
| 搜索框 | Input | 实时搜索，延迟500ms执行 |
| 过滤器 | Select | 多条件组合过滤 |
| 待办项 | Row | 悬停高亮，点击复选框切换状态 |
| 操作按钮 | Button | 编辑/删除/完成 |

#### 动态行为

**页面加载**:
- 显示骨架屏占位（300ms）
- 加载统计数据
- 加载待办列表（分页）

**数据刷新**:
- 创建/编辑/删除后自动刷新列表
- 保持当前页码和过滤条件
- 显示操作成功/失败提示

**实时搜索**:
- 输入停止500ms后执行搜索
- 显示搜索结果数量
- 清空搜索恢复完整列表

**过滤切换**:
- 改变过滤条件立即刷新列表
- URL更新反映过滤状态
- 显示当前过滤条件标签

**分页**:
- 每页20条记录
- 保存当前页码
- 删除记录后自动调整

#### 列表项状态

| 状态 | 视觉表现 |
|------|----------|
| Normal | 白色背景 |
| Hover | 浅灰背景 (#F9F9F9) |
| Completed | 删除线 + 灰色文字 |
| Selected | 浅蓝背景 (#E6F7FF) |
| Overdue | 红色截止日期标识 |

---

### 页面 3: 创建待办页面 (Create Todo)

**URL**: `/create-todo`

#### 布局结构

```
┌─────────────────────────────────────┐
│ ← 创建新待办事项                    │
├─────────────────────────────────────┤
│                                     │
│  标题 *                              │
│  [________________________________] │
│  0/200                              │
│                                     │
│  描述                               │
│  [________________________________] │
│  [________________________________] │
│  0/1000                             │
│                                     │
│  优先级  |  截止日期                  │
│  [中▼   ]  [2026-01-30 ▼]           │
│                                     │
│  分类/标签                          │
│  [☐] 工作  [☐] 个人  [☐] 学习  [☐] 会议 │
│                                     │
│  状态                               │
│  [待处理 ▼]                         │
│                                     │
│  [取消]            [创建待办]        │
└─────────────────────────────────────┘
```

#### 交互元素

| 元素 | 验证规则 | 实时反馈 |
|------|----------|----------|
| 标题 | 必填，1-200字符 | 字符计数，失去焦点验证 |
| 描述 | 可选，最多1000字符 | 字符计数 |
| 优先级 | 枚举值 | 下拉选择 |
| 截止日期 | 可选，不早于今天 | 日期选择器 |
| 分类 | 多选，至少0个 | 点击切换 |
| 状态 | 枚举值 | 下拉选择 |

#### 表单验证流程

1. **失焦验证**: 字段失去焦点时验证
2. **提交验证**: 提交时验证所有必填字段
3. **错误显示**: 字段下方显示错误消息
4. **错误标记**: 错误字段红色边框
5. **成功提交**: 显示成功提示，返回列表页

#### 自动保存

- 输入时自动保存草稿（localStorage）
- 页面刷新后恢复草稿内容
- 成功创建后清除草稿

---

### 页面 4: 编辑待办页面 (Edit Todo)

**URL**: `/edit-todo/:id`

#### 布局结构

与创建页面相同，顶部显示"编辑待办事项"，包含待办元信息（ID、创建时间、更新时间）。

#### 预加载数据

- 页面加载时从API获取待办详情
- 表单字段预填充当前值
- 显示待办统计信息

#### 保存逻辑

- **保存按钮**: 提交修改，返回列表
- **删除按钮**: 显示确认对话框，确认后删除
- **取消按钮**: 放弃修改，返回列表

#### 冲突检测

- 使用版本号检测并发修改
- 检测到冲突时提示用户
- 选项：覆盖/取消/查看最新

---

### 页面 5: 分类管理页面 (Category Management)

**URL**: `/categories`

#### 布局结构

```
┌─────────────────────────────────────┐
│ [📋] 分类管理         [➕ 新建分类]  │
├─────────────────────────────────────┤
│                                     │
│  ┌──────────┐  ┌──────────┐        │
│  │ 💼 工作   │  │ 👤 个人   │        │
│  │          │  │          │        │
│  │ 📊 8个   │  │ 📊 3个   │        │
│  │ ✅ 5完成 │  │ ✅ 2完成 │        │
│  │          │  │          │        │
│  │ [✏️][🗑️] │  │ [✏️][🗑️] │        │
│  └──────────┘  └──────────┘        │
│                                     │
│  ┌──────────┐  ┌──────────┐        │
│  │ 📚 学习   │  │ 👥 会议   │        │
│  │ ...      │  │ ...      │        │
│  └──────────┘  └──────────┘        │
└─────────────────────────────────────┘
```

#### 交互元素

| 元素 | 类型 | 交互说明 |
|------|------|----------|
| 分类卡片 | Card | 显示分类图标、名称、统计 |
| 新建按钮 | Button | 打开创建分类对话框 |
| 编辑按钮 | Button | 打开编辑分类对话框 |
| 删除按钮 | Button | 检查使用情况，确认后删除 |

#### 删除验证

- 检查分类是否被待办事项使用
- 如果已使用，显示"无法删除"提示
- 如果未使用，显示确认对话框

#### 颜色选择

- 提供预设颜色选项
- 支持自定义颜色（颜色选择器）
- 实时预览效果

---

### 页面 6: 个人中心页面 (User Profile)

**URL**: `/profile`

#### 布局结构

```
┌─────────────────────────────────────┐
│ [📋] 个人中心                       │
├─────────────────────────────────────┤
│ ┌─────────────────┐ ┌─────────────┐│
│ │ 📋 基本信息      │ │ 🔒 修改密码  ││
│ │ 用户名: testuser│ │ [当前密码]   ││
│ │ 注册: 2026-01-15│ │ [新密码]     ││
│ │ 状态: ✓ 正常    │ │ [确认密码]   ││
│ └─────────────────┘ │ [修改密码]   ││
│                      └─────────────┘│
│ ┌─────────────────┐ ┌─────────────┐│
│ │ 📊 数据统计      │ │ ⚡ 快捷操作  ││
│ │ [全部] [待处理]  │ │ [📥 导出数据]││
│ │ [已完成] [已过期]│ │ [🧹 清理完成]││
│ └─────────────────┘ │ [⚠️ 注销账户]││
│                      └─────────────┘│
│ ┌─────────────────┐                  │
│ │ 🕐 最近活动      │                  │
│ │ • 创建待办...    │                  │
│ │ • 完成待办...    │                  │
│ └─────────────────┘                  │
└─────────────────────────────────────┘
```

#### 交互元素

| 元素 | 类型 | 交互说明 |
|------|------|----------|
| 基本信息 | Display | 只读显示用户信息 |
| 统计卡片 | Card | 显示统计数据，可点击过滤 |
| 修改密码表单 | Form | 验证旧密码，更新新密码 |
| 导出按钮 | Button | 选择格式导出数据 |
| 清理按钮 | Button | 批量删除已完成待办 |
| 注销按钮 | Button | 危险操作，多重确认 |

#### 修改密码流程

1. 输入旧密码验证
2. 输入新密码（验证复杂度）
3. 确认新密码（验证一致性）
4. 提交更新
5. 成功后自动登出
6. 返回登录页重新登录

#### 注销账户流程

1. 点击"注销账户"
2. 显示警告信息（不可恢复）
3. 输入密码确认身份
4. 输入"DELETE"确认
5. 执行注销
6. 返回首页

---

## 交互模式

### 1. 模态框 (Modal)

**用途**: 表单填写、确认对话框、详细信息展示

**打开动画**:
- 淡入 (300ms)
- 从下往上滑入 (30px)
- 缓动函数: cubic-bezier(0.34, 1.56, 0.64, 1)

**关闭方式**:
- 点击 × 按钮
- 点击遮罩层
- 按 ESC 键

**关闭动画**:
- 淡出 (200ms)
- 向下缩放 (scale 0.95)
- 缓动函数: ease-in

**焦点管理**:
- 打开时聚焦到第一个输入框
- 焦点陷阱（Tab键在模态框内循环）
- 关闭后焦点返回触发元素

---

### 2. 消息提示 (Toast)

**类型**:
- Success: 绿色，自动关闭（3秒）
- Info: 蓝色，自动关闭（3秒）
- Warning: 黄色，自动关闭（5秒）
- Error: 红色，手动关闭

**位置**: 右上角，距离顶部 20px

**动画**:
- 进入: 从右侧滑入 + 淡入
- 退出: 向右侧滑出 + 淡出

**堆叠**: 最多显示3条，超出时关闭最早的

---

### 3. 确认对话框 (Confirm Dialog)

**用途**: 删除确认、重要操作确认

**结构**:
```
┌─────────────────────────┐
│      ⚠️ 确认删除         │
├─────────────────────────┤
│                         │
│   确定要删除此待办吗？   │
│   此操作不可撤销。       │
│                         │
├─────────────────────────┤
│    [取消]    [确认删除]  │
└─────────────────────────┘
```

**背景效果**: 遮罩层背景模糊 (blur 2px)

**焦点管理**: 打开时聚焦到取消按钮

---

### 4. 下拉菜单 (Dropdown)

**触发方式**: 点击触发

**打开动画**: 向下展开 (150ms)

**菜单项**:
- 悬停高亮
- 图标 + 文字
- 分隔线（分隔逻辑分组）
- 快捷键提示

**关闭方式**:
- 选择菜单项
- 点击外部
- 按 ESC 键

---

### 5. 侧边栏抽屉 (Sidebar Drawer)

**用途**: 移动端导航、辅助面板

**打开方向**:
- 桌面: 右侧滑入
- 移动: 左侧滑入（覆盖全屏）

**宽度**:
- 桌面: 300px
- 平板: 250px
- 手机: 80% 屏幕，最大 300px

**遮罩**: 半透明黑色背景，点击关闭

---

## 动画效果

### 页面过渡

| 场景 | 效果 | 时长 | 缓动函数 |
|------|------|------|----------|
| 页面切换 | 淡入 | 200ms | ease-in-out |
| 列表加载 | 逐项淡入 | 50ms 间隔 | ease-out |
| 模态框打开 | 向上滑入 + 淡入 | 300ms | cubic-bezier(0.34, 1.56, 0.64, 1) |
| 模态框关闭 | 向下缩放 + 淡出 | 200ms | ease-in |

### 元素动画

| 场景 | 效果 | 时长 |
|------|------|------|
| 按钮悬停 | 背景色渐变 | 150ms |
| 列表项悬停 | 背景色渐变 | 150ms |
| 复选框选中 | 缩放弹跳 | 200ms |
| 加载中 | 旋转 | 1s 无限循环 |
| 骨架屏 | 闪烁 | 1.5s 无限循环 |

### 加载动画

**旋转加载器**:
- 尺寸: 40px
- 线条粗细: 3px
- 颜色: 主题蓝
- 旋转时长: 1s

**骨架屏**:
- 背景色: #F2F2F2
- 高亮色: #E6E6E6
- 动画: 左向右扫光
- 时长: 1.5s

---

## 错误处理

### 表单验证错误

**实时验证**:
- 失去焦点时验证
- 输入时延迟 500ms 验证
- 提交时验证所有字段

**错误提示**:
- 字段下方显示错误消息
- 错误字段红色边框
- 图标指示错误位置
- 错误消息闪烁动画

**示例**:
```
用户名: [__________________]
        ✕ 用户名不能为空
        • 长度: 4-20字符
        • 只能包含字母、数字、下划线
```

---

### 网络错误

**处理流程**:
1. 显示错误提示 Toast
2. 提供重试按钮
3. 记录错误日志
4. 显示具体错误信息

**提示消息**:
```
┌─────────────────────────────────┐
│  ❌ 网络请求失败                │
│  请检查网络连接后重试            │
│  错误编号: NET-001              │
│         [重试]    [关闭]         │
└─────────────────────────────────┘
```

---

### 服务器错误

**错误页面**:
```
┌─────────────────────────────────┐
│                                 │
│          😢 出错了              │
│                                 │
│      服务器暂时无法响应          │
│      错误编号: 500-001           │
│                                 │
│         [返回首页]               │
│                                 │
└─────────────────────────────────┘
```

---

## 响应式设计

### 断点适配

| 设备 | 屏幕宽度 | 布局调整 |
|------|----------|----------|
| 手机（小） | < 576px | 单栏，汉堡菜单，全屏模态框 |
| 手机（大） | 576-768px | 单栏，汉堡菜单，全屏模态框 |
| 平板（小） | 768-992px | 紧凑两栏，水平导航 |
| 平板（大） | 992-1200px | 标准两栏，水平导航 |
| 桌面 | 1200-1600px | 标准布局，三栏可选 |
| 大屏 | > 1600px | 宽屏布局，内容居中 |

### 移动端特殊处理

**导航**:
- 汉堡菜单图标
- 抽屉式侧边栏（从左侧滑入）
- 遮罩层点击关闭

**表格**:
- 改为卡片式列表
- 每张卡片显示一行数据
- 点击展开详细信息

**表单**:
- 单列布局
- 输入框全宽
- 按钮固定底部

**模态框**:
- 全屏显示
- 从底部滑入
- 顶部关闭按钮

---

## 可访问性

### 键盘导航

- **Tab**: 按顺序聚焦可交互元素
- **Shift + Tab**: 反向聚焦
- **Enter/Space**: 激活聚焦元素
- **ESC**: 关闭模态框、下拉菜单
- **Arrow Keys**: 在列表、菜单中导航

### 焦点管理

**可见焦点**:
- 蓝色轮廓线（2px）
- 轮廓偏移（2px）

**跳过链接**:
- "跳到主内容"链接（屏幕阅读器可见）
- 快捷键: Alt + M

**模态框焦点**:
- 打开: 焦点移到模态框内第一个元素
- 关闭: 焦点返回触发元素
- 焦点陷阱: Tab在模态框内循环

### 屏幕阅读器

**ARIA 标签**:
- 图标按钮: `aria-label`
- 表单字段: `aria-label` 或关联 `<label>`
- 错误提示: `aria-live="polite"`
- 加载状态: `aria-busy="true"`
- 模态框: `role="dialog"`, `aria-modal="true"`

**语义化 HTML**:
- 正确使用标题层级（h1-h6）
- 使用 `<nav>`, `<main>`, `<aside>`, `<footer>`
- 列表使用 `<ul>`, `<ol>`
- 表单使用 `<form>`, `<fieldset>`

---

## 性能优化

### 加载优化

**首屏加载**:
- 关键CSS内联
- 非关键资源延迟加载
- 图片懒加载
- 代码分割（Route-based）

**资源优化**:
- 压缩CSS/JS
- 图片WebP格式
- 图标使用SVG
- 字体子集化

### 运行时优化

**列表渲染**:
- 虚拟滚动（大列表）
- 分页加载
- 防抖/节流（搜索、滚动）

**动画优化**:
- 使用 CSS transforms
- 避免触发布局重排
- 使用 will-change 提示

**状态管理**:
- 本地缓存（localStorage）
- 乐观更新（UI先更新）
- 请求去重

---

## 相关文档

- 线框图: `docs/design/wireframes/`
- 用户流程: `docs/design/user-flow.md`
- 设计系统: `docs/design/design-system.md`
- 需求规格: `docs/requirements/requirements-spec.md`
- 用户故事: `docs/requirements/user-stories.md`
