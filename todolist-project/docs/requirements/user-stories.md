# 用户故事

> **项目**: TodoList 待办事项管理系统
> **版本**: 1.0
> **最后更新**: 2026-01-26

---

## 用户故事索引

| US ID | 标题 | 角色 | 优先级 | 故事点 | 状态 |
|-------|------|------|--------|--------|------|
| US-001 | 用户注册和登录 | 新用户 | P0 | 5 | 待开发 |
| US-002 | 创建待办事项 | 注册用户 | P0 | 3 | 待开发 |
| US-003 | 查看待办事项列表 | 注册用户 | P0 | 5 | 待开发 |
| US-004 | 更新待办事项 | 注册用户 | P0 | 3 | 待开发 |
| US-005 | 删除待办事项 | 注册用户 | P0 | 2 | 待开发 |
| US-006 | 标记待办事项完成状态 | 注册用户 | P0 | 2 | 待开发 |
| US-007 | 管理分类和标签 | 注册用户 | P1 | 5 | 待开发 |
| US-008 | 修改个人信息和密码 | 注册用户 | P1 | 3 | 待开发 |
| US-009 | 搜索待办事项 | 注册用户 | P1 | 3 | 待开发 |
| US-010 | 过滤待办事项 | 注册用户 | P1 | 5 | 待开发 |

---

## 用户故事详情

## US-001: 用户注册和登录

> 作为 **新用户**，我想要 **注册账户并登录系统**，以便于 **使用待办事项管理功能**

### 用户角色
**新用户**：首次使用系统的用户，需要创建账户才能使用待办事项管理功能

### 功能描述
用户可以通过提供用户名和密码注册新账户，注册后可以使用相同的用户名和密码登录系统。系统需要验证用户名的唯一性和密码的复杂度，并使用安全的加密方式存储密码。

### 业务价值
允许用户创建个人账户，实现数据隔离和个性化体验，保护用户数据安全。

### 验收标准 (Acceptance Criteria)

#### AC-001.1: 用户注册成功
**Given** 用户访问注册页面
**When** 用户输入唯一的用户名和符合要求的密码
**Then** 系统应该创建新账户
**And** 系统应该显示注册成功消息
**And** 密码应该以加密形式存储在数据库中

**示例**:
```gherkin
Given 用户访问注册页面
When 用户输入用户名 "testuser" 和密码 "Test1234"
And 用户点击"注册"按钮
Then 系统应该创建新账户
And 系统应该显示"注册成功"消息
And 用户应该被自动登录
```

#### AC-001.2: 用户名重复验证
**Given** 用户访问注册页面
**When** 用户输入已存在的用户名
**Then** 系统应该显示"用户名已存在"错误消息
**And** 系统不应该创建账户

#### AC-001.3: 密码复杂度验证
**Given** 用户访问注册页面
**When** 用户输入不符合复杂度要求的密码（少于 8 位或只包含数字）
**Then** 系统应该显示"密码必须至少 8 位，包含字母和数字"错误消息
**And** 系统不应该创建账户

#### AC-001.4: 用户登录成功
**Given** 用户已注册账户
**When** 用户输入正确的用户名和密码
**Then** 系统应该验证身份成功
**And** 系统应该生成 JWT Token
**And** 系统应该跳转到主页
**And** Token 应该在后续请求中用于身份验证

#### AC-001.5: 用户登录失败
**Given** 用户访问登录页面
**When** 用户输入错误的用户名或密码
**Then** 系统应该显示"用户名或密码错误"消息
**And** 系统不应该生成 Token

#### AC-001.6: 登录失败次数限制
**Given** 用户连续 5 次登录失败
**When** 用户尝试第 6 次登录
**Then** 系统应该锁定账户 30 分钟
**And** 系统应该显示"账户已锁定，请 30 分钟后再试"消息

### 优先级
**P0** - 必须有 (Must Have)

**理由**: 这是系统的核心功能，没有它用户无法使用任何功能

### 故事点
**5**

**估算依据**:
- 开发时间: 2-3 天（用户实体、密码加密、JWT 实现、验证逻辑）
- 测试时间: 1 天
- 复杂度: 中（涉及安全机制）
- 不确定性: 低（标准功能）

### 依赖

**技术依赖**:
- Spring Security
- JWT 库（jjwt）
- BCrypt 密码加密
- 数据库用户表

### 备注
- 需要考虑 Token 过期和刷新机制
- 需要考虑账户锁定后的解锁机制
- 这是所有其他功能的前置条件

---

## US-002: 创建待办事项

> 作为 **注册用户**，我想要 **创建新的待办事项**，以便于 **记录和管理我的任务**

### 用户角色
**注册用户**：已登录系统的用户，需要管理日常任务和待办事项

### 功能描述
用户可以创建待办事项，输入标题、描述、优先级、截止日期，并选择分类/标签。系统需要验证输入数据的合法性，并将待办事项关联到当前用户。

### 业务价值
帮助用户记录和组织任务，是系统的核心功能，为后续的管理和跟踪提供基础。

### 验收标准 (Acceptance Criteria)

#### AC-002.1: 创建包含必填字段的待办事项
**Given** 用户已登录系统
**When** 用户输入标题 "完成项目文档"
**And** 用户选择优先级 "高"
**And** 用户点击"创建"按钮
**Then** 系统应该创建待办事项
**And** 系统应该返回待办事项的 ID 和完整信息
**And** 待办事项应该关联到当前用户
**And** 待办事项默认状态应该是"待处理"

#### AC-002.2: 标题长度验证
**Given** 用户已登录系统
**When** 用户输入超过 200 字符的标题
**And** 用户点击"创建"按钮
**Then** 系统应该显示"标题长度不能超过 200 字符"错误消息
**And** 系统不应该创建待办事项

#### AC-002.3: 创建包含所有字段的待办事项
**Given** 用户已登录系统
**When** 用户输入标题、描述、优先级、截止日期和分类
**And** 用户点击"创建"按钮
**Then** 系统应该创建待办事项
**And** 所有字段都应该被正确保存
**And** 系统应该返回完整的待办事项信息

#### AC-002.4: 未登录用户无法创建
**Given** 用户未登录系统
**When** 用户尝试创建待办事项
**Then** 系统应该返回 401 Unauthorized 错误
**And** 系统不应该创建待办事项

### 优先级
**P0** - 必须有 (Must Have)

**理由**: 核心功能，待办事项的基本操作

### 故事点
**3**

**估算依据**:
- 开发时间: 1-2 天（实体设计、CRUD 操作、数据验证）
- 测试时间: 0.5-1 天
- 复杂度: 低
- 不确定性: 低

### 依赖

**依赖的用户故事**:
- US-001: 用户注册和登录

**技术依赖**:
- 待办事项实体和数据库表
- 数据验证框架

### 备注
- 标题是唯一必填字段
- 需要考虑默认值设置

---

## US-003: 查看待办事项列表

> 作为 **注册用户**，我想要 **查看我的待办事项列表**，以便于 **了解当前的任务状态**

### 用户角色
**注册用户**：已登录系统，需要查看和管理自己的待办事项

### 功能描述
用户可以查看所有待办事项的列表，系统支持分页显示，只显示当前登录用户的待办事项。默认按创建时间倒序排列。

### 业务价值
让用户能够快速浏览和了解所有待办事项，是日常使用最频繁的功能。

### 验收标准 (Acceptance Criteria)

#### AC-003.1: 查看所有待办事项
**Given** 用户已登录系统
**And** 用户已创建 25 个待办事项
**When** 用户访问待办事项列表页面
**Then** 系统应该显示第一页的 20 个待办事项
**And** 系统应该提供分页信息
**And** 待办事项应该按创建时间倒序排列
**And** 系统只显示当前用户的待办事项

#### AC-003.2: 分页功能
**Given** 用户已登录系统
**And** 用户有 25 个待办事项
**When** 用户点击"下一页"按钮
**Then** 系统应该显示第 2 页的 5 个待办事项
**And** 系统应该显示总页数为 2

#### AC-003.3: 空列表显示
**Given** 用户已登录系统
**And** 用户没有创建任何待办事项
**When** 用户访问待办事项列表页面
**Then** 系统应该显示"暂无待办事项"消息
**And** 系统应该提供"创建待办事项"的引导

#### AC-003.4: 数据隔离
**Given** 用户 A 和用户 B 都已注册
**And** 用户 A 创建了待办事项 "任务 A"
**And** 用户 B 创建了待办事项 "任务 B"
**When** 用户 A 查看待办事项列表
**Then** 系统应该只显示"任务 A"
**And** 系统不应该显示"任务 B"

### 优先级
**P0** - 必须有 (Must Have)

**理由**: 核心功能，用户最常使用的功能

### 故事点
**5**

**估算依据**:
- 开发时间: 2-3 天（分页、排序、数据过滤）
- 测试时间: 1 天
- 复杂度: 中
- 不确定性: 低

### 依赖

**依赖的用户故事**:
- US-001: 用户注册和登录
- US-002: 创建待办事项

**技术依赖**:
- 分页插件（PageHelper）
- 数据库查询优化

### 备注
- 需要考虑大数据量情况下的性能
- 分页大小可以配置化

---

## US-004: 更新待办事项

> 作为 **注册用户**，我想要 **编辑待办事项**，以便于 **更新任务信息**

### 用户角色
**注册用户**：已登录系统，需要修改已创建的待办事项

### 功能描述
用户可以修改待办事项的标题、描述、优先级、截止日期和分类/标签。系统需要验证用户权限，只允许修改自己的待办事项。

### 业务价值
允许用户根据实际情况调整任务信息，提高灵活性。

### 验收标准 (Acceptance Criteria)

#### AC-004.1: 更新待办事项
**Given** 用户已登录系统
**And** 用户已创建待办事项 ID 为 1
**When** 用户修改标题为"更新后的标题"
**And** 用户点击"保存"按钮
**Then** 系统应该更新待办事项
**And** 系统应该返回更新后的待办事项信息
**And** 系统应该记录更新时间

#### AC-004.2: 部分字段更新
**Given** 用户已登录系统
**And** 用户已创建待办事项
**When** 用户只修改优先级为"高"
**And** 用户点击"保存"按钮
**Then** 系统应该只更新优先级字段
**And** 其他字段应该保持不变

#### AC-004.3: 权限验证
**Given** 用户 A 已登录系统
**And** 用户 B 创建了待办事项 ID 为 1
**When** 用户 A 尝试更新待办事项 ID 为 1
**Then** 系统应该返回 403 Forbidden 错误
**And** 系统不应该更新待办事项

#### AC-004.4: 更新不存在的待办事项
**Given** 用户已登录系统
**When** 用户尝试更新不存在的待办事项 ID 为 999
**Then** 系统应该返回 404 Not Found 错误

### 优先级
**P0** - 必须有 (Must Have)

**理由**: 核心功能，提供必要的修改能力

### 故事点
**3**

**估算依据**:
- 开发时间: 1-2 天（权限验证、数据更新）
- 测试时间: 0.5-1 天
- 复杂度: 低
- 不确定性: 低

### 依赖

**依赖的用户故事**:
- US-001: 用户注册和登录
- US-002: 创建待办事项

**技术依赖**:
- 权限验证机制

### 备注
- 需要考虑并发更新问题（乐观锁）

---

## US-005: 删除待办事项

> 作为 **注册用户**，我想要 **删除待办事项**，以便于 **清理已完成或取消的任务**

### 用户角色
**注册用户**：已登录系统，需要删除不需要的待办事项

### 功能描述
用户可以删除自己的待办事项。系统采用软删除机制，标记为已删除但保留在数据库中。只允许删除自己的待办事项。

### 业务价值
帮助用户保持列表整洁，移除不再需要的任务。

### 验收标准 (Acceptance Criteria)

#### AC-005.1: 删除待办事项
**Given** 用户已登录系统
**And** 用户已创建待办事项 ID 为 1
**When** 用户点击"删除"按钮
**And** 用户确认删除
**Then** 系统应该标记待办事项为已删除
**And** 待办事项不应该再出现在列表中
**And** 系统应该记录删除时间

#### AC-005.2: 权限验证
**Given** 用户 A 已登录系统
**And** 用户 B 创建了待办事项 ID 为 1
**When** 用户 A 尝试删除待办事项 ID 为 1
**Then** 系统应该返回 403 Forbidden 错误
**And** 系统不应该删除待办事项

#### AC-005.3: 批量删除
**Given** 用户已登录系统
**And** 用户创建了 3 个待办事项
**When** 用户选择这 3 个待办事项
**And** 用户点击"批量删除"按钮
**And** 用户确认删除
**Then** 系统应该删除所有选中的待办事项
**And** 系统应该显示"已删除 3 个待办事项"消息

#### AC-005.4: 删除不存在的待办事项
**Given** 用户已登录系统
**When** 用户尝试删除不存在的待办事项 ID 为 999
**Then** 系统应该返回 404 Not Found 错误

### 优先级
**P0** - 必须有 (Must Have)

**理由**: 核心功能，提供数据清理能力

### 故事点
**2**

**估算依据**:
- 开发时间: 1 天（软删除、权限验证）
- 测试时间: 0.5 天
- 复杂度: 低
- 不确定性: 低

### 依赖

**依赖的用户故事**:
- US-001: 用户注册和登录
- US-002: 创建待办事项

**技术依赖**:
- 软删除机制（deleted 字段）

### 备注
- 使用软删除保留数据，便于审计和恢复
- 需要考虑是否提供"恢复已删除"功能（可后续添加）

---

## US-006: 标记待办事项完成状态

> 作为 **注册用户**，我想要 **标记待办事项为已完成或未完成**，以便于 **跟踪任务进度**

### 用户角色
**注册用户**：已登录系统，需要标记任务的完成状态

### 功能描述
用户可以切换待办事项的状态（待处理/已完成）。系统记录状态变更时间，只允许操作自己的待办事项。

### 业务价值
帮助用户跟踪任务进度，提供成就感，便于区分已完成和未完成的任务。

### 验收标准 (Acceptance Criteria)

#### AC-006.1: 标记待办事项为已完成
**Given** 用户已登录系统
**And** 用户创建了待办事项 "完成报告"
**When** 用户点击"标记为完成"按钮
**Then** 系统应该更新状态为"已完成"
**And** 系统应该记录完成时间
**And** 系统应该显示"任务已完成"消息

#### AC-006.2: 标记待办事项为待处理
**Given** 用户已登录系统
**And** 用户有待办事项状态为"已完成"
**When** 用户点击"标记为待处理"按钮
**Then** 系统应该更新状态为"待处理"
**And** 系统应该清除完成时间

#### AC-006.3: 权限验证
**Given** 用户 A 已登录系统
**And** 用户 B 创建了待办事项 ID 为 1
**When** 用户 A 尝试修改待办事项 ID 为 1 的状态
**Then** 系统应该返回 403 Forbidden 错误
**And** 系统不应该修改状态

#### AC-006.4: 批量标记完成
**Given** 用户已登录系统
**And** 用户有 3 个待处理状态的待办事项
**When** 用户选择这 3 个待办事项
**And** 用户点击"批量标记为完成"按钮
**Then** 系统应该将所有待办事项标记为已完成
**And** 系统应该显示"已标记 3 个任务为完成"消息

### 优先级
**P0** - 必须有 (Must Have)

**理由**: 核心功能，任务管理的关键操作

### 故事点
**2**

**估算依据**:
- 开发时间: 1 天（状态切换、时间记录）
- 测试时间: 0.5 天
- 复杂度: 低
- 不确定性: 低

### 依赖

**依赖的用户故事**:
- US-001: 用户注册和登录
- US-002: 创建待办事项

**技术依赖**:
- 状态枚举设计

### 备注
- 需要在列表中清晰展示完成状态
- 可以考虑在列表顶部将已完成任务放在底部

---

## US-007: 管理分类和标签

> 作为 **注册用户**，我想要 **创建和管理分类和标签**，以便于 **更好地组织我的任务**

### 用户角色
**注册用户**：已登录系统，需要使用分类和标签来组织待办事项

### 功能描述
用户可以创建、查看、修改和删除分类/标签。每个分类/标签有名称和颜色属性。分类/标签在同一用户下名称唯一。

### 业务价值
提供更好的任务组织能力，便于按类别管理和查找任务。

### 验收标准 (Acceptance Criteria)

#### AC-007.1: 创建分类
**Given** 用户已登录系统
**When** 用户输入分类名称"工作"
**And** 用户选择颜色"红色"
**And** 用户点击"创建"按钮
**Then** 系统应该创建分类
**And** 系统应该返回分类信息
**And** 分类应该关联到当前用户

#### AC-007.2: 分类名称唯一性验证
**Given** 用户已登录系统
**And** 用户已创建分类"工作"
**When** 用户尝试创建同名分类"工作"
**Then** 系统应该显示"分类名称已存在"错误消息
**And** 系统不应该创建分类

#### AC-007.3: 查看所有分类
**Given** 用户已登录系统
**And** 用户创建了 3 个分类
**When** 用户访问分类列表页面
**Then** 系统应该显示所有 3 个分类
**And** 系统应该只显示当前用户创建的分类

#### AC-007.4: 删除未使用的分类
**Given** 用户已登录系统
**And** 用户创建了分类"测试"
**And** 没有待办事项使用此分类
**When** 用户点击"删除"按钮
**Then** 系统应该删除分类
**And** 系统应该显示"分类已删除"消息

#### AC-007.5: 删除已使用的分类
**Given** 用户已登录系统
**And** 用户创建了分类"工作"
**And** 有待办事项使用了此分类
**When** 用户点击"删除"按钮
**Then** 系统应该显示"分类已被使用，无法删除"错误消息
**And** 系统不应该删除分类

#### AC-007.6: 为待办事项分配分类
**Given** 用户已登录系统
**And** 用户创建了分类"工作"
**And** 用户创建待办事项
**When** 用户选择分类"工作"
**Then** 待办事项应该关联到"工作"分类

### 优先级
**P1** - 应该有 (Should Have)

**理由**: 重要功能，提升组织能力，但不影响核心流程

### 故事点
**5**

**估算依据**:
- 开发时间: 2-3 天（分类实体、关联关系、验证逻辑）
- 测试时间: 1 天
- 复杂度: 中（涉及多对多关系）
- 不确定性: 中

### 依赖

**依赖的用户故事**:
- US-001: 用户注册和登录
- US-002: 创建待办事项

**技术依赖**:
- 多对多关系设计
- 中间表设计

### 备注
- 分类和标签可以设计为同一实体，通过类型区分
- 需要考虑颜色选择器的实现

---

## US-008: 修改个人信息和密码

> 作为 **注册用户**，我想要 **修改我的个人信息和密码**，以便于 **保持账户信息的准确性**

### 用户角色
**注册用户**：已登录系统，需要管理个人账户信息

### 功能描述
用户可以查看个人信息，修改密码。修改密码时需要验证旧密码，新密码必须符合复杂度要求。

### 业务价值
提供基本的账户管理能力，保护账户安全。

### 验收标准 (Acceptance Criteria)

#### AC-008.1: 查看个人信息
**Given** 用户已登录系统
**When** 用户访问个人信息页面
**Then** 系统应该显示用户名
**And** 系统应该显示注册时间
**And** 系统应该显示待办事项统计（总数、已完成、待处理）

#### AC-008.2: 修改密码成功
**Given** 用户已登录系统
**When** 用户输入旧密码 "Test1234"
**And** 用户输入新密码 "NewPass567"
**And** 用户确认新密码 "NewPass567"
**And** 用户点击"保存"按钮
**Then** 系统应该验证旧密码正确
**And** 系统应该更新密码
**And** 系统应该显示"密码已更新，请重新登录"消息
**And** 用户应该被登出

#### AC-008.3: 旧密码错误
**Given** 用户已登录系统
**When** 用户输入错误的旧密码
**And** 用户输入新密码
**And** 用户点击"保存"按钮
**Then** 系统应该显示"旧密码错误"消息
**And** 系统不应该更新密码

#### AC-008.4: 新密码不符合复杂度
**Given** 用户已登录系统
**When** 用户输入旧密码
**And** 用户输入不符合复杂度要求的新密码
**And** 用户点击"保存"按钮
**Then** 系统应该显示"密码必须至少 8 位，包含字母和数字"错误消息
**And** 系统不应该更新密码

#### AC-008.5: 两次密码不一致
**Given** 用户已登录系统
**When** 用户输入旧密码
**And** 用户输入新密码 "NewPass567"
**And** 用户确认新密码 "NewPass789"（不一致）
**And** 用户点击"保存"按钮
**Then** 系统应该显示"两次输入的密码不一致"错误消息
**And** 系统不应该更新密码

### 优先级
**P1** - 应该有 (Should Have)

**理由**: 基础功能，提升用户体验和安全性

### 故事点
**3**

**估算依据**:
- 开发时间: 1-2 天（密码验证、更新逻辑）
- 测试时间: 0.5-1 天
- 复杂度: 低
- 不确定性: 低

### 依赖

**依赖的用户故事**:
- US-001: 用户注册和登录

**技术依赖**:
- 密码加密和验证

### 备注
- 需要考虑是否允许修改用户名（通常不允许）
- 密码修改后建议发送通知邮件（可选）

---

## US-009: 搜索待办事项

> 作为 **注册用户**，我想要 **搜索待办事项**，以便于 **快速找到特定的任务**

### 用户角色
**注册用户**：已登录系统，需要快速查找特定的待办事项

### 功能描述
用户可以通过关键词搜索待办事项的标题和描述。搜索支持模糊匹配，只搜索当前用户的待办事项。

### 业务价值
帮助用户在大量待办事项中快速找到目标任务。

### 验收标准 (Acceptance Criteria)

#### AC-009.1: 按标题搜索
**Given** 用户已登录系统
**And** 用户创建了待办事项 "完成项目报告"
**When** 用户输入搜索关键词"项目"
**And** 用户点击"搜索"按钮
**Then** 系统应该显示"完成项目报告"待办事项
**And** 系统应该高亮匹配的关键词

#### AC-009.2: 按描述搜索
**Given** 用户已登录系统
**And** 用户创建了待办事项，描述为"需要在周五之前完成"
**When** 用户输入搜索关键词"周五"
**And** 用户点击"搜索"按钮
**Then** 系统应该显示该待办事项

#### AC-009.3: 搜索无结果
**Given** 用户已登录系统
**When** 用户输入搜索关键词"不存在的内容"
**And** 用户点击"搜索"按钮
**Then** 系统应该显示"未找到匹配的待办事项"消息

#### AC-009.4: 搜索结果分页
**Given** 用户已登录系统
**And** 用户创建了 25 个包含"项目"关键词的待办事项
**When** 用户搜索"项目"
**Then** 系统应该显示第一页的 20 个结果
**And** 系统应该提供分页导航

#### AC-009.5: 清空搜索
**Given** 用户已执行搜索
**When** 用户点击"清空"按钮
**Then** 系统应该清空搜索关键词
**And** 系统应该显示所有待办事项

### 优先级
**P1** - 应该有 (Should Have)

**理由**: 重要功能，提升用户体验，但可以先用过滤功能替代

### 故事点
**3**

**估算依据**:
- 开发时间: 1-2 天（模糊查询、索引优化）
- 测试时间: 0.5-1 天
- 复杂度: 低
- 不确定性: 低

### 依赖

**依赖的用户故事**:
- US-001: 用户注册和登录
- US-002: 创建待办事项
- US-003: 查看待办事项列表

**技术依赖**:
- 数据库模糊查询（LIKE）
- 全文搜索索引（可选）

### 备注
- 可以考虑使用 Elasticsearch 实现高级搜索（后续版本）
- 需要考虑搜索性能优化

---

## US-010: 过滤待办事项

> 作为 **注册用户**，我想要 **按不同条件过滤待办事项**，以便于 **查看特定类型的任务**

### 用户角色
**注册用户**：已登录系统，需要按条件筛选待办事项

### 功能描述
用户可以按状态（待处理/已完成）、优先级（高/中/低）、截止日期、分类/标签过滤待办事项。支持多条件组合过滤。

### 业务价值
帮助用户聚焦特定类型的任务，提高管理效率。

### 验收标准 (Acceptance Criteria)

#### AC-010.1: 按状态过滤
**Given** 用户已登录系统
**And** 用户有 10 个待处理和 5 个已完成的待办事项
**When** 用户选择状态过滤"待处理"
**Then** 系统应该只显示 10 个待处理的待办事项
**And** 系统应该显示"找到 10 个待处理任务"

#### AC-010.2: 按优先级过滤
**Given** 用户已登录系统
**And** 用户有 3 个高优先级、5 个中优先级、2 个低优先级的待办事项
**When** 用户选择优先级过滤"高"
**Then** 系统应该只显示 3 个高优先级的待办事项

#### AC-010.3: 按截止日期过滤
**Given** 用户已登录系统
**And** 用户有不同截止日期的待办事项
**When** 用户选择截止日期过滤"今天"
**Then** 系统应该只显示截止日期为今天的待办事项
**And** 当用户选择"本周"
**Then** 系统应该只显示截止日期在本周的待办事项
**And** 当用户选择"已过期"
**Then** 系统应该只显示截止日期早于今天的待办事项

#### AC-010.4: 按分类过滤
**Given** 用户已登录系统
**And** 用户创建了分类"工作"和"个人"
**And** 用户有不同分类的待办事项
**When** 用户选择分类过滤"工作"
**Then** 系统应该只显示分类为"工作"的待办事项

#### AC-010.5: 组合过滤
**Given** 用户已登录系统
**When** 用户选择状态"待处理"
**And** 用户选择优先级"高"
**And** 用户选择分类"工作"
**Then** 系统应该显示同时满足所有条件的待办事项
**And** 系统应该显示"找到 X 个任务"

#### AC-010.6: 清空过滤
**Given** 用户已应用多个过滤条件
**When** 用户点击"清空过滤"按钮
**Then** 系统应该清空所有过滤条件
**And** 系统应该显示所有待办事项

### 优先级
**P1** - 应该有 (Should Have)

**理由**: 重要功能，提升用户体验和任务管理效率

### 故事点
**5**

**估算依据**:
- 开发时间: 2-3 天（多条件查询、动态过滤）
- 测试时间: 1 天
- 复杂度: 中
- 不确定性: 中

### 依赖

**依赖的用户故事**:
- US-001: 用户注册和登录
- US-002: 创建待办事项
- US-003: 查看待办事项列表
- US-007: 管理分类和标签

**技术依赖**:
- 动态查询构建
- 数据库查询优化

### 备注
- 需要考虑多个过滤条件的组合逻辑
- 过滤条件应该在 URL 中可参数化，便于分享

---

## 优先级说明

### P0 - 必须有 (Must Have)
- 核心功能，没有它系统无法使用
- 必须在 MVP 中实现
- 包括：用户认证、待办事项 CRUD、状态管理

### P1 - 应该有 (Should Have)
- 重要功能，但有临时解决方案
- 尽可能在 MVP 中实现
- 包括：分类管理、搜索过滤、个人信息管理

### P2 - 可以有 (Could Have)
- 有价值的功能，如果时间允许可以包含
- 可以在后续迭代中实现
- 包括：数据导出、提醒通知

### P3 - 不会有 (Won't Have)
- 当前版本明确不实现
- 记录以备将来参考
- 包括：社交分享、高级报表

---

## 故事点说明

使用斐波那契数列进行估算：

| 故事点 | 工作量（天） | 复杂度 | 不确定性 |
|--------|--------------|--------|----------|
| 1      | < 1          | 低     | 低       |
| 2      | 1-2          | 低     | 低       |
| 3      | 2-3          | 中     | 中       |
| 5      | 3-5          | 中     | 中       |
| 8      | 5-10         | 高     | 高       |
| 13     | > 10         | 很高   | 很高     |

**估算依据**:
- 开发时间（编码、单元测试）
- 集成测试时间
- 复杂度（技术难度、业务逻辑复杂度）
- 技术不确定性（技术栈熟悉度、依赖关系）
- 团队规模和经验

**总计**: 36 故事点
**项目总工作量估算**: 约 15-20 天（假设 1 故事点 ≈ 0.5 天）

---

## INVEST 原则检查

所有用户故事均符合 INVEST 原则：

- **I**ndependent (独立): 用户故事之间依赖关系清晰，可以独立开发和测试
- **N**egotiable (可协商): 用户故事细节可以在开发过程中协商调整
- **V**aluable (有价值): 每个用户故事对用户或业务都有明确价值
- **E**stimable (可估算): 每个用户故事的工作量可以合理估算
- **S**mall (短小): 用户故事大小适中，可以在一个 Sprint 内完成
- **T**estable (可测试): 每个用户故事都有明确的验收标准和测试场景
